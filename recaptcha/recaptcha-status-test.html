<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>reCAPTCHA ì„œë²„ ìƒíƒœ í™•ì¸</title>
</head>
<body>
<h1>reCAPTCHA ì„œë²„ ìƒíƒœ í™•ì¸</h1>

<h2>ì„¤ì •</h2>
<div>
  <label>API ì„œë²„ URL:</label><br>
  <input type="text" id="apiUrl" value="http://localhost:8080" style="width: 300px;"><br><br>

  <button onclick="checkStatus()">ì„œë²„ ìƒíƒœ í™•ì¸</button>
</div>

<hr>

<h2>ì„œë²„ ì‘ë‹µ</h2>
<pre id="result" style="background: #f0f0f0; padding: 10px; border: 1px solid #ccc;">ì„œë²„ ìƒíƒœë¥¼ í™•ì¸í•˜ë ¤ë©´ ìœ„ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</pre>

<hr>

<div>
  <a href="recaptcha-v2-test.html">v2 í…ŒìŠ¤íŠ¸ í˜ì´ì§€ë¡œ ì´ë™</a> |
  <a href="recaptcha-v3-test.html">v3 í…ŒìŠ¤íŠ¸ í˜ì´ì§€ë¡œ ì´ë™</a>
</div>

<script>
  async function checkStatus() {
    const apiUrl = document.getElementById('apiUrl').value;

    try {
      document.getElementById('result').textContent = 'ì„œë²„ ìƒíƒœ í™•ì¸ ì¤‘...';

      const result = await fetch(`${apiUrl}/open/recaptcha/status`);
      const data = await result.json();

      if (result.ok) {
        document.getElementById('result').textContent =
                `âœ… ì„œë²„ ìƒíƒœ ì •ìƒ\n` +
                `HTTP Status: ${result.status}\n` +
                `Response:\n${JSON.stringify(data, null, 2)}`;
      } else {
        document.getElementById('result').textContent =
                `âŒ ì„œë²„ ì˜¤ë¥˜\n` +
                `HTTP Status: ${result.status}\n` +
                `Response:\n${JSON.stringify(data, null, 2)}`;
      }
    } catch (error) {
      document.getElementById('result').textContent =
              `ğŸš¨ ì—°ê²° ì˜¤ë¥˜\n` +
              `Error: ${error.message}\n` +
              `í™•ì¸ì‚¬í•­:\n` +
              `1. API ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸\n` +
              `2. CORS ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸\n` +
              `3. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸`;
    }
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ìƒíƒœ í™•ì¸
  window.onload = function() {
    setTimeout(checkStatus, 500);
  };
</script>
</body>
</html>